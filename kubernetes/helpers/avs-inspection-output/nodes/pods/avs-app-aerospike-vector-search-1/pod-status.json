{
    "apiVersion": "v1",
    "kind": "Pod",
    "metadata": {
        "annotations": {
            "checksum/configmap": "eb2a071498b57ce1736e01dfe371e7a604f8cc175f1678bf47f1a6b6667b0467",
            "cloud.google.com/cluster_autoscaler_unhelpable_since": "2025-04-29T20:33:09+0000",
            "cloud.google.com/cluster_autoscaler_unhelpable_until": "Inf"
        },
        "creationTimestamp": "2025-04-29T20:33:09Z",
        "generateName": "avs-app-aerospike-vector-search-",
        "labels": {
            "app": "avs-app-aerospike-vector-search",
            "app.kubernetes.io/instance": "avs-app",
            "app.kubernetes.io/managed-by": "Helm",
            "app.kubernetes.io/name": "aerospike-vector-search",
            "app.kubernetes.io/version": "1.1.0",
            "apps.kubernetes.io/pod-index": "1",
            "controller-revision-hash": "avs-app-aerospike-vector-search-797bc877bd",
            "helm.sh/chart": "aerospike-vector-search-1.2.0",
            "statefulset.kubernetes.io/pod-name": "avs-app-aerospike-vector-search-1"
        },
        "name": "avs-app-aerospike-vector-search-1",
        "namespace": "avs",
        "ownerReferences": [
            {
                "apiVersion": "apps/v1",
                "blockOwnerDeletion": true,
                "controller": true,
                "kind": "StatefulSet",
                "name": "avs-app-aerospike-vector-search",
                "uid": "c1161266-7b4d-46e1-b357-09741244c7ef"
            }
        ],
        "resourceVersion": "6163262",
        "uid": "91e3b5ec-fb02-44ce-a583-a063c53539bf"
    },
    "spec": {
        "affinity": {
            "nodeAffinity": {
                "requiredDuringSchedulingIgnoredDuringExecution": {
                    "nodeSelectorTerms": [
                        {
                            "matchExpressions": [
                                {
                                    "key": "aerospike.io/node-pool",
                                    "operator": "In",
                                    "values": [
                                        "avs"
                                    ]
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "containers": [
            {
                "command": [
                    "/bin/sh",
                    "-c",
                    "export JAVA_OPTS=$(cat /etc/aerospike-vector-search/jvm.opts) \u0026\u0026 exec /usr/bin/as-tini-static -r SIGUSR1 -t SIGTERM -e 143 -- /opt/aerospike-vector-search/bin/aerospike-vector-search -f /etc/aerospike-vector-search/aerospike-vector-search.yml"
                ],
                "env": [
                    {
                        "name": "JAVA_TOOL_OPTIONS",
                        "value": "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:InitialRAMPercentage=60.0"
                    }
                ],
                "image": "aerospike/aerospike-vector-search:1.1.0",
                "imagePullPolicy": "IfNotPresent",
                "livenessProbe": {
                    "failureThreshold": 3,
                    "httpGet": {
                        "path": "/manage/rest/v1",
                        "port": 5040,
                        "scheme": "HTTP"
                    },
                    "initialDelaySeconds": 10,
                    "periodSeconds": 10,
                    "successThreshold": 1,
                    "timeoutSeconds": 2
                },
                "name": "aerospike-vector-search",
                "ports": [
                    {
                        "containerPort": 5000,
                        "hostPort": 5000,
                        "name": "svc-0",
                        "protocol": "TCP"
                    },
                    {
                        "containerPort": 5040,
                        "hostPort": 5040,
                        "name": "manage-0",
                        "protocol": "TCP"
                    },
                    {
                        "containerPort": 5001,
                        "hostPort": 5001,
                        "name": "interc-0",
                        "protocol": "TCP"
                    }
                ],
                "readinessProbe": {
                    "failureThreshold": 3,
                    "httpGet": {
                        "path": "/manage/rest/v1",
                        "port": 5040,
                        "scheme": "HTTP"
                    },
                    "initialDelaySeconds": 10,
                    "periodSeconds": 10,
                    "successThreshold": 1,
                    "timeoutSeconds": 2
                },
                "resources": {},
                "securityContext": {
                    "allowPrivilegeEscalation": false,
                    "runAsUser": 0
                },
                "terminationMessagePath": "/dev/termination-log",
                "terminationMessagePolicy": "File",
                "volumeMounts": [
                    {
                        "mountPath": "/etc/aerospike-vector-search",
                        "name": "aerospike-vector-search"
                    },
                    {
                        "mountPath": "/etc/aerospike-vector-search/secrets",
                        "name": "aerospike-secret",
                        "readOnly": true
                    },
                    {
                        "mountPath": "/etc/ssl/certs/",
                        "name": "aerospike-tls",
                        "readOnly": true
                    },
                    {
                        "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount",
                        "name": "kube-api-access-xpr2m",
                        "readOnly": true
                    }
                ]
            }
        ],
        "dnsPolicy": "ClusterFirstWithHostNet",
        "enableServiceLinks": true,
        "hostNetwork": true,
        "hostname": "avs-app-aerospike-vector-search-1",
        "imagePullSecrets": [
            {
                "name": "jfrog-secret"
            }
        ],
        "initContainers": [
            {
                "env": [
                    {
                        "name": "AEROSPIKE_VECTOR_SEARCH_CONFIG",
                        "value": "{\"cluster\":{\"cluster-name\":\"avs-db-1\"},\"feature-key-file\":\"/etc/aerospike-vector-search/secrets/features.conf\",\"heartbeat\":{\"seeds\":[{\"address\":\"avs-app-aerospike-vector-search-0.avs-app-aerospike-vector-search-internal.avs.svc.cluster.local\",\"port\":5001}]},\"interconnect\":{\"ports\":{\"5001\":{\"addresses\":\"0.0.0.0\"}}},\"logging\":{\"enable-console-logging\":false,\"format\":\"simple\",\"levels\":{\"metrics-ticker\":\"debug\",\"root\":\"info\"},\"max-history\":30,\"ticker-interval\":10},\"manage\":{\"ports\":{\"5040\":{}}},\"service\":{\"metadata-namespace\":\"avs-meta\",\"ports\":{\"5000\":{}}},\"storage\":{\"client-policy\":{},\"seeds\":[{\"aerocluster-0-0.aerocluster.aerospike.svc.cluster.local\":{\"port\":3000}}]}}"
                    },
                    {
                        "name": "NODE_NAME",
                        "valueFrom": {
                            "fieldRef": {
                                "apiVersion": "v1",
                                "fieldPath": "spec.nodeName"
                            }
                        }
                    },
                    {
                        "name": "SERVICE_NAME",
                        "value": "avs-app-aerospike-vector-search"
                    },
                    {
                        "name": "POD_NAMESPACE",
                        "valueFrom": {
                            "fieldRef": {
                                "apiVersion": "v1",
                                "fieldPath": "metadata.namespace"
                            }
                        }
                    },
                    {
                        "name": "NETWORK_MODE",
                        "value": "hostnetwork"
                    },
                    {
                        "name": "CONTAINER_PORT",
                        "value": "5000"
                    },
                    {
                        "name": "REPLICAS",
                        "value": "3"
                    },
                    {
                        "name": "POD_NAME",
                        "valueFrom": {
                            "fieldRef": {
                                "apiVersion": "v1",
                                "fieldPath": "metadata.name"
                            }
                        }
                    },
                    {
                        "name": "AEROSPIKE_VECTOR_SEARCH_NODE_ROLES",
                        "value": "{\"default-nodes\":[\"query\",\"index-update\"],\"indexer-nodes\":[\"index-update\"],\"query-nodes\":[\"query\"],\"standalone-indexer-nodes\":[\"standalone-indexer\"],\"standalone-nodes\":[\"standalone-indexer\"]}"
                    }
                ],
                "image": "artifact.aerospike.io/container/avs-init-container:1.2.0",
                "imagePullPolicy": "Always",
                "name": "config-injector",
                "resources": {},
                "terminationMessagePath": "/dev/termination-log",
                "terminationMessagePolicy": "File",
                "volumeMounts": [
                    {
                        "mountPath": "/etc/aerospike-vector-search",
                        "name": "aerospike-vector-search"
                    },
                    {
                        "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount",
                        "name": "kube-api-access-xpr2m",
                        "readOnly": true
                    }
                ]
            }
        ],
        "preemptionPolicy": "PreemptLowerPriority",
        "priority": 0,
        "restartPolicy": "Always",
        "schedulerName": "default-scheduler",
        "securityContext": {},
        "serviceAccount": "avs-app-aerospike-vector-search",
        "serviceAccountName": "avs-app-aerospike-vector-search",
        "subdomain": "avs-app-aerospike-vector-search-internal",
        "terminationGracePeriodSeconds": 30,
        "tolerations": [
            {
                "effect": "NoExecute",
                "key": "node.kubernetes.io/not-ready",
                "operator": "Exists",
                "tolerationSeconds": 300
            },
            {
                "effect": "NoExecute",
                "key": "node.kubernetes.io/unreachable",
                "operator": "Exists",
                "tolerationSeconds": 300
            }
        ],
        "volumes": [
            {
                "emptyDir": {},
                "name": "aerospike-vector-search"
            },
            {
                "name": "aerospike-secret",
                "secret": {
                    "defaultMode": 420,
                    "optional": false,
                    "secretName": "aerospike-secret"
                }
            },
            {
                "name": "aerospike-tls",
                "secret": {
                    "defaultMode": 420,
                    "optional": false,
                    "secretName": "aerospike-tls"
                }
            },
            {
                "name": "kube-api-access-xpr2m",
                "projected": {
                    "defaultMode": 420,
                    "sources": [
                        {
                            "serviceAccountToken": {
                                "expirationSeconds": 3607,
                                "path": "token"
                            }
                        },
                        {
                            "configMap": {
                                "items": [
                                    {
                                        "key": "ca.crt",
                                        "path": "ca.crt"
                                    }
                                ],
                                "name": "kube-root-ca.crt"
                            }
                        },
                        {
                            "downwardAPI": {
                                "items": [
                                    {
                                        "fieldRef": {
                                            "apiVersion": "v1",
                                            "fieldPath": "metadata.namespace"
                                        },
                                        "path": "namespace"
                                    }
                                ]
                            }
                        }
                    ]
                }
            }
        ]
    },
    "status": {
        "conditions": [
            {
                "lastProbeTime": null,
                "lastTransitionTime": "2025-04-29T20:33:09Z",
                "message": "0/5 nodes are available: 1 node(s) had untolerated taint {node.kubernetes.io/memory-pressure: }, 2 node(s) didn't have free ports for the requested pod ports, 2 node(s) didn't match Pod's node affinity/selector. preemption: 0/5 nodes are available: 2 No preemption victims found for incoming pod, 3 Preemption is not helpful for scheduling.",
                "reason": "Unschedulable",
                "status": "False",
                "type": "PodScheduled"
            }
        ],
        "phase": "Pending",
        "qosClass": "BestEffort"
    }
}
